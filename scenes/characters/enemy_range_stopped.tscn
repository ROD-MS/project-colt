[gd_scene load_steps=34 format=3 uid="uid://dh2ramkdbpjei"]

[ext_resource type="Script" uid="uid://c40auq808mxxf" path="res://scripts/enemy/enemy.gd" id="1_i1hue"]
[ext_resource type="Texture2D" uid="uid://tk0euh261yq" path="res://assets/enemies/BACK.png" id="1_ifdl5"]
[ext_resource type="Texture2D" uid="uid://1m1y40mamf1r" path="res://assets/enemies/BACK_LEFT.png" id="2_i1hue"]
[ext_resource type="Texture2D" uid="uid://fupkoutjwbt5" path="res://assets/enemies/Walk_front.png" id="3_ruqxc"]
[ext_resource type="Texture2D" uid="uid://bs0c0834skmgy" path="res://assets/enemies/FRONT_LEFT.png" id="4_l8edk"]
[ext_resource type="Texture2D" uid="uid://3u5gwl40jv3r" path="res://assets/enemies/LEFT.png" id="5_rvim2"]
[ext_resource type="PackedScene" uid="uid://dqjaymeneqyya" path="res://scenes/components/health_component.tscn" id="6_wqk4p"]
[ext_resource type="Script" uid="uid://cbtjyj5luh5rh" path="res://scripts/state_machine/statemachine.gd" id="7_f06on"]
[ext_resource type="Script" uid="uid://v888sesn0jiq" path="res://scripts/enemy/idle.gd" id="8_16o5s"]
[ext_resource type="Script" uid="uid://bel62fr51amop" path="res://scripts/enemy/follow_player.gd" id="9_5frdk"]
[ext_resource type="Script" uid="uid://c5xunewtvuv4o" path="res://scripts/enemy/shoot.gd" id="10_xtc85"]
[ext_resource type="AudioStream" uid="uid://bfq2ylwah34x0" path="res://assets/audio/enemy/audio_1_inimigo_comum_limpo.wav" id="11_i3y4l"]
[ext_resource type="AudioStream" uid="uid://d0f1ujaim5mia" path="res://assets/audio/enemy/audio_2_inimigo_comum_limpo.wav" id="12_ft24g"]
[ext_resource type="AudioStream" uid="uid://bgdqxf0t6irln" path="res://assets/audio/enemy/audio_3_inimigo_comum_limpo.wav" id="13_it1pf"]
[ext_resource type="AudioStream" uid="uid://cj5hk72jcw01j" path="res://assets/audio/enemy/audio_4_inimigo_comum_limpo.wav" id="14_hq8lu"]
[ext_resource type="AudioStream" uid="uid://cfoke0f8cuwwe" path="res://assets/audio/enemy/Audio dano inimigo 1.wav" id="15_533d5"]
[ext_resource type="AudioStream" uid="uid://1gjm7hvvr2ke" path="res://assets/audio/enemy/audio dano inimigo 2.mp3" id="16_gxpav"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_7ktny"]
height = 0.512085
radius = 0.70166

[sub_resource type="SphereShape3D" id="SphereShape3D_jtiv3"]
radius = 15.0

[sub_resource type="AtlasTexture" id="AtlasTexture_32j2v"]
atlas = ExtResource("1_ifdl5")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_maxb5"]
atlas = ExtResource("1_ifdl5")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ob74p"]
atlas = ExtResource("2_i1hue")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bo1hi"]
atlas = ExtResource("2_i1hue")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_7ktny"]
atlas = ExtResource("3_ruqxc")
region = Rect2(0, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_rji51"]
atlas = ExtResource("3_ruqxc")
region = Rect2(106, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_7bjuq"]
atlas = ExtResource("3_ruqxc")
region = Rect2(212, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_d55bs"]
atlas = ExtResource("3_ruqxc")
region = Rect2(318, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_khpgp"]
atlas = ExtResource("4_l8edk")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_cxo1f"]
atlas = ExtResource("4_l8edk")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bh5ks"]
atlas = ExtResource("5_rvim2")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_hsu17"]
atlas = ExtResource("5_rvim2")
region = Rect2(0, 48, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_anada"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_32j2v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_maxb5")
}],
"loop": true,
"name": &"back",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ob74p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bo1hi")
}],
"loop": true,
"name": &"back_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ktny")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rji51")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7bjuq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d55bs")
}],
"loop": true,
"name": &"front",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_khpgp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cxo1f")
}],
"loop": true,
"name": &"front_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bh5ks")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hsu17")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xp5p6"]
radius = 0.810395
height = 2.16132

[node name="enemy_range_stopped" type="CharacterBody3D" groups=["enemy", "enemy_stopped"]]
script = ExtResource("1_i1hue")
damage = 15
time_reload_sec = 3

[node name="head" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.780379, 0)
shape = SubResource("CylinderShape3D_7ktny")
debug_color = Color(0.969414, 0, 0.461513, 0.42)

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0197648, -0.31386)
target_position = Vector3(0, 0, -15)

[node name="detect_player" type="Area3D" parent="."]

[node name="collision" type="CollisionShape3D" parent="detect_player"]
shape = SubResource("SphereShape3D_jtiv3")

[node name="animation" type="AnimatedSprite3D" parent="." groups=["enemy_item"]]
transform = Transform3D(-0.7, 0, -1.05697e-07, 0, 0.7, 0, 1.05697e-07, 0, -0.7, 0, 0, 0)
modulate = Color(1, 0, 0.016666412, 1)
pixel_size = 0.03
billboard = 2
texture_filter = 0
sprite_frames = SubResource("SpriteFrames_anada")
animation = &"front"
autoplay = "front"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0679515, 0)
shape = SubResource("CapsuleShape3D_xp5p6")

[node name="HealthComponent" parent="." instance=ExtResource("6_wqk4p")]
MAX_HEALTH = 50

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state", "agent")]
script = ExtResource("7_f06on")
initial_state = NodePath("idle")
agent = NodePath("..")
active = true

[node name="idle" type="Node" parent="StateMachine"]
script = ExtResource("8_16o5s")

[node name="followPlayer" type="Node" parent="StateMachine"]
script = ExtResource("9_5frdk")

[node name="shoot" type="Node" parent="StateMachine" node_paths=PackedStringArray("raycast")]
script = ExtResource("10_xtc85")
time_reload_sec = 2.0
raycast = NodePath("../../RayCast3D")

[node name="nav" type="NavigationAgent3D" parent="."]
debug_enabled = true

[node name="sounds" type="Node3D" parent="."]

[node name="Audio1Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("11_i3y4l")

[node name="Audio2Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("12_ft24g")

[node name="Audio3Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("13_it1pf")

[node name="Audio4Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("14_hq8lu")

[node name="dano_enemy1" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("15_533d5")

[node name="dano_enemy2" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("16_gxpav")
