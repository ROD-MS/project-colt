[gd_scene load_steps=34 format=3 uid="uid://gqfvqggvmnbq"]

[ext_resource type="Script" uid="uid://c40auq808mxxf" path="res://scripts/enemy/enemy.gd" id="1_htdb8"]
[ext_resource type="Texture2D" uid="uid://tk0euh261yq" path="res://assets/enemies/BACK.png" id="2_vwwpk"]
[ext_resource type="PackedScene" uid="uid://dqjaymeneqyya" path="res://scenes/components/health_component.tscn" id="3_8xlit"]
[ext_resource type="Texture2D" uid="uid://1m1y40mamf1r" path="res://assets/enemies/BACK_LEFT.png" id="3_mdwwy"]
[ext_resource type="Texture2D" uid="uid://fupkoutjwbt5" path="res://assets/enemies/Walk_front.png" id="4_174rk"]
[ext_resource type="Script" uid="uid://cbtjyj5luh5rh" path="res://scripts/state_machine/statemachine.gd" id="5_106bi"]
[ext_resource type="Texture2D" uid="uid://bs0c0834skmgy" path="res://assets/enemies/FRONT_LEFT.png" id="5_enap6"]
[ext_resource type="Script" uid="uid://v888sesn0jiq" path="res://scripts/enemy/idle.gd" id="6_b5ppk"]
[ext_resource type="Texture2D" uid="uid://3u5gwl40jv3r" path="res://assets/enemies/LEFT.png" id="6_odgil"]
[ext_resource type="Script" uid="uid://bel62fr51amop" path="res://scripts/enemy/follow_player.gd" id="8_uborx"]
[ext_resource type="AudioStream" uid="uid://bfq2ylwah34x0" path="res://assets/audio/enemy/audio_1_inimigo_comum_limpo.wav" id="12_174rk"]
[ext_resource type="AudioStream" uid="uid://d0f1ujaim5mia" path="res://assets/audio/enemy/audio_2_inimigo_comum_limpo.wav" id="13_7ktny"]
[ext_resource type="Script" uid="uid://c5xunewtvuv4o" path="res://scripts/enemy/shoot.gd" id="13_qfcfh"]
[ext_resource type="AudioStream" uid="uid://bgdqxf0t6irln" path="res://assets/audio/enemy/audio_3_inimigo_comum_limpo.wav" id="14_rji51"]
[ext_resource type="AudioStream" uid="uid://cj5hk72jcw01j" path="res://assets/audio/enemy/audio_4_inimigo_comum_limpo.wav" id="15_7bjuq"]
[ext_resource type="AudioStream" uid="uid://cfoke0f8cuwwe" path="res://assets/audio/enemy/Audio dano inimigo 1.wav" id="16_d55bs"]
[ext_resource type="AudioStream" uid="uid://1gjm7hvvr2ke" path="res://assets/audio/enemy/audio dano inimigo 2.mp3" id="18_rji51"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_7ktny"]
height = 0.512085
radius = 0.70166

[sub_resource type="SphereShape3D" id="SphereShape3D_jtiv3"]
radius = 10.0

[sub_resource type="AtlasTexture" id="AtlasTexture_32j2v"]
atlas = ExtResource("2_vwwpk")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_maxb5"]
atlas = ExtResource("2_vwwpk")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ob74p"]
atlas = ExtResource("3_mdwwy")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bo1hi"]
atlas = ExtResource("3_mdwwy")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_7ktny"]
atlas = ExtResource("4_174rk")
region = Rect2(0, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_rji51"]
atlas = ExtResource("4_174rk")
region = Rect2(106, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_7bjuq"]
atlas = ExtResource("4_174rk")
region = Rect2(212, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_d55bs"]
atlas = ExtResource("4_174rk")
region = Rect2(318, 0, 106, 110)

[sub_resource type="AtlasTexture" id="AtlasTexture_khpgp"]
atlas = ExtResource("5_enap6")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_cxo1f"]
atlas = ExtResource("5_enap6")
region = Rect2(0, 48, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bh5ks"]
atlas = ExtResource("6_odgil")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_hsu17"]
atlas = ExtResource("6_odgil")
region = Rect2(0, 48, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_anada"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_32j2v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_maxb5")
}],
"loop": true,
"name": &"back",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ob74p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bo1hi")
}],
"loop": true,
"name": &"back_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ktny")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rji51")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7bjuq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d55bs")
}],
"loop": true,
"name": &"front",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_khpgp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cxo1f")
}],
"loop": true,
"name": &"front_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bh5ks")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hsu17")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xp5p6"]
radius = 0.810395
height = 2.16132

[node name="enemy" type="CharacterBody3D" groups=["enemy", "weak_enemy"]]
script = ExtResource("1_htdb8")
damage = 20
time_reload_sec = 2
knockback_force = 20

[node name="head" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.780379, 0)
shape = SubResource("CylinderShape3D_7ktny")
debug_color = Color(0.969414, 0, 0.461513, 0.42)

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0197648, -0.31386)
visible = false
target_position = Vector3(0, 0, -5)

[node name="detect_player" type="Area3D" parent="."]

[node name="collision" type="CollisionShape3D" parent="detect_player"]
shape = SubResource("SphereShape3D_jtiv3")

[node name="animation" type="AnimatedSprite3D" parent="." groups=["enemy_item"]]
transform = Transform3D(-0.7, 0, -1.05697e-07, 0, 0.7, 0, 1.05697e-07, 0, -0.7, 0, 0, 0)
pixel_size = 0.03
billboard = 2
texture_filter = 0
sprite_frames = SubResource("SpriteFrames_anada")
animation = &"front"
autoplay = "front"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0679515, 0)
shape = SubResource("CapsuleShape3D_xp5p6")

[node name="HealthComponent" parent="." instance=ExtResource("3_8xlit")]
MAX_HEALTH = 30

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state", "agent")]
script = ExtResource("5_106bi")
initial_state = NodePath("idle")
agent = NodePath("..")
active = true

[node name="idle" type="Node" parent="StateMachine"]
script = ExtResource("6_b5ppk")

[node name="followPlayer" type="Node" parent="StateMachine"]
script = ExtResource("8_uborx")

[node name="shoot" type="Node" parent="StateMachine" node_paths=PackedStringArray("raycast")]
script = ExtResource("13_qfcfh")
time_reload_sec = 2.0
raycast = NodePath("../../RayCast3D")

[node name="nav" type="NavigationAgent3D" parent="."]

[node name="sounds" type="Node3D" parent="."]

[node name="Audio1Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("12_174rk")

[node name="Audio2Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("13_7ktny")

[node name="Audio3Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("14_rji51")

[node name="Audio4Inimigo" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("15_7bjuq")

[node name="dano_enemy1" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("16_d55bs")

[node name="dano_enemy2" type="AudioStreamPlayer3D" parent="sounds"]
stream = ExtResource("18_rji51")

[connection signal="body_entered" from="detect_player" to="StateMachine/idle" method="_on_detect_player_body_entered"]
